# twitterAPI
twitterAPIで機械学習用の対話データを作成します。
ツイートに対してリプライを集めて発話と応答に整形してファイル出力します。

◆使い方
1. Const.py　を各環境要に編集する。（公式からもらったAPIキーとか）
2. Const.py　の　SEARCH_WORD　に好きな検索ワードを入れる。
3. Action.py　を実行する。
4. Const.pyで指定したフォルダにファイルが出力される。（デフォルトだとAction.pyと同じフォルダ）

◆結果イメージ
同じ行のものが発話と応答になります。
input.txt（発話）
===========================================================
行数:1 1343466743935594496:	う ゅ 。 。 。 ねむ ね むにゃんこだしん
行数:2 1343466743935594496:	う ゅ 。 。 。 ねむ ね むにゃんこだしん
行数:3 1343480030018502656:	今日 0 回 行動 の 予定 だっ た けど ズレ て 明日 0 回 行動 に なり そう な ので ヨロ
行数:4 1343480030018502656:	今日 0 回 行動 の 予定 だっ た けど ズレ て 明日 0 回 行動 に なり そう な ので ヨロ
行数:5 1343139123943501824:	帰っ て き たら 部屋 が 猫 の うん ち まみれ で 放心 し て た 。 この世 の 地獄 か と 思っ た 。 さて 、 どこ から 片付け よっ か な …
行数:6 1343466747370749952:	メス ボーイ の 歌 枠 おもれ ぇ
===========================================================
output.txt（応答）
===========================================================
行数:1 1343483043600744448:	ちょっと だけ イラッ と き た 。 すまん 。
行数:2 1343482957156139008:	え
行数:3 1343482924830654465:	御意
行数:4 1343482822007214081:	まじ で 楽しみ だ よ ち きしょ ー
行数:5 1343478087527219200:	猫 は 気まぐれ … … と は よく 言っ た もん だ … … 気まぐれ スギィ
行数:6 1343482758304165891:	草
===========================================================

◆できること
1. 何ツイート取得するかをConst.pyで指定できます。（デフォルト10000）
2. 1ツイートに対してリプライをいくつ収集するかをConst.pyで指定できます。（デフォルト3）
3. ある程度整形していますが、もっと削りたいとか削りすぎとか分かち書きいらないとかあれば　CommonUtil.py　の　cleanWord関数を修正してください。

◆大事なこと
1. APIの仕様で一度の通信では100件までしかツイートを取得できないため、冗長なコードになっています。。。（有料版なら制限なし？）
2. APIの仕様である程度の件数取得した後、15分の規制がかかります。その間はWAITをかけているためコンソールが止まっていますが15分したら動き出すので根気強く待ってあげてください。（有料版なら制限なし？）
3. APIの仕様で一週間以上前のツイートは取得できません。（有料版なら制限なし？）
4. APIでツイートを取得してからリプライのあるデータを選別しています。なので、取得結果にリプライがなければ「ファイル出力なし」となります。
5. 連続でツイートを取得しすぎるとサーバーに拒否されることがあるためその場合10分待機するようになっています。

◆バージョン情報
ライブラリ	バージョン
python	  3.8.0
tweepy	  3.10.0
neologdn	0.4
emoji	    0.6.0
MeCab	    0.996.2
